(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,n){},157:function(e,t){},160:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(12),r=n.n(c),l=(n(104),n(10)),i=n(20),u=n(180),m=n(182),s=n(183),d=n(184),f=n(189),E=n(188),h=n(48),p=n(191),b=n(30),k=n(37),g=n(194),v=n(193),j=n(190),O=function(e){var t=e.type,n=e.taskProp,c=e.handleSubmit,r=Object(a.useState)(n),i=Object(l.a)(r,2),d=i[0],E=i[1],h={margin:"3rem",width:400,height:400,position:"absolute",top:window.innerHeight/2-250,left:window.innerWidth/2-200,padding:20,textAlign:"center"};return o.a.createElement(u.a,{style:h},o.a.createElement(m.a,{title:"".concat(t," task")}),o.a.createElement(s.a,null,o.a.createElement(g.a,{style:{display:"block",margin:20,textAlign:"left"}},o.a.createElement(v.a,{htmlFor:"taskName"},"Task name"),o.a.createElement(j.a,{value:d.Name,id:"taskName",onChange:function(e){return E(Object(k.a)(Object(k.a)({},d),{},Object(b.a)({},"Name",e.target.value)))}})),o.a.createElement(g.a,{style:{display:"block",margin:20,textAlign:"left"}},o.a.createElement(v.a,{htmlFor:"taskDesc"},"Task description"),o.a.createElement(j.a,{value:d.description,id:"taskDesc",onChange:function(e){return E(Object(k.a)(Object(k.a)({},d),{},Object(b.a)({},"description",e.target.value)))}}))),o.a.createElement(f.a,{onClick:function(e){return c(d)}},t))},y=Object(a.createContext)(null),w=function(){return Object(a.useContext)(y)},C=function(e){var t=e.task,n=e.column,c=w().socket,r=Object(a.useState)(!1),i=Object(l.a)(r,2),m=i[0],d=i[1],f=Object(p.a)({item:{type:"TASK",task:t,fromColumn:n}}),b=Object(l.a)(f,2)[1],k=function(e){d(!1),c.emit("updateTask",e)};return o.a.createElement("div",null,o.a.createElement(u.a,{onClick:function(){return d(!0)},style:{margin:"1rem",minWidth:200},ref:b},o.a.createElement(s.a,null,o.a.createElement(h.a,{variant:"h5",component:"p"},t.Name))),o.a.createElement(E.a,{open:m,onClose:k},o.a.createElement(O,{type:"Update",taskProp:t,handleSubmit:k})))},S=n(192),A=function(e){var t=e.column,n=e.deleteColumn,c=w().socket,r=Object(a.useState)(!1),i=Object(l.a)(r,2),h=i[0],p=i[1],b=Object(S.a)({accept:"TASK",canDrop:function(e){return e.fromColumn._id!==t._id},drop:function(e){var n=e.task,a=e.fromColumn;c.emit("moveTask",{task:n,to:t._id,from:a._id})}}),k=Object(l.a)(b,2)[1],g=function(e){p(!1),c.emit("addTask",e)};return o.a.createElement("div",null,o.a.createElement(u.a,{style:{margin:"1rem"},ref:k},o.a.createElement(m.a,{title:t.Name}),o.a.createElement(s.a,null,t.tasks&&t.tasks.map((function(e){return o.a.createElement(C,{key:e._id,task:e,column:t})}))),o.a.createElement(d.a,null,o.a.createElement(f.a,{style:{margin:"auto"},size:"large",onClick:function(){return p(!0)}},"Add Task"),o.a.createElement(f.a,{style:{margin:"auto"},size:"large",onClick:n},"Delete Column"))),o.a.createElement(E.a,{open:h,onClose:g},o.a.createElement(O,{type:"Add",taskProp:{name:"",description:"",column:t._id},handleSubmit:g})))},T=n(58),_=n.n(T),x=n(185),N=n(92),D=function(e){var t=e.id,n=Object(a.useState)(),c=Object(l.a)(n,2),r=c[0],i=c[1],u=w().socket,m=function(){_.a.get("http://localhost:8000/api/boards/".concat(t)).then((function(e){return i(e.data)})).catch((function(e){return console.log(e)}))};return Object(a.useEffect)((function(){_.a.get("http://localhost:8000/api/boards/".concat(t)).then((function(e){i(e.data),u.on("addColumn",(function(e){return m()})),u.on("delColumn",(function(e){return m()})),u.on("moveTask",(function(e){return m()})),u.on("addTask",(function(e){return m()})),u.on("updateTask",(function(e){return m()}))})).catch((function(e){return console.log(e)}))}),[t,u]),o.a.createElement(x.a,{backend:N.a},o.a.createElement("h1",null,"Board"),o.a.createElement("button",{onClick:function(e){return u.emit("addColumn",{board:t})}},"Add Column"),o.a.createElement("div",{style:{display:"flex",padding:20}},r&&r.columns.map((function(e){return o.a.createElement(A,{key:e._id,column:e,deleteColumn:function(){return function(e){return u.emit("delColumn",{id:e._id})}(e)}})}))))},P=function(e){var t=e.socket,n=e.provider,c=Object(a.useState)(),r=Object(l.a)(c,2),i=r[0],u=r[1],m=w(),s=m.auth,d=m.setAuth,f=m.user,E=m.setUser;Object(a.useEffect)((function(){t.on(n,(function(e){E(e),d(!0),console.log(e)}))}),[n,d,E,t]),Object(a.useEffect)((function(){f&&i&&i.close()}),[f,i]);var h=function(e){e.preventDefault(),u(function(){var e=window.innerWidth/2-300,a=window.innerHeight/2-300,o="http://localhost:8000/auth/".concat(n,"?socketId=").concat(t.id);return window.open(o,"","toolbar=no, location=no, directories=no, status=no, menubar=no, \n            scrollbars=no, resizable=no, copyhistory=no, width=".concat(600,", \n            height=").concat(600,", top=").concat(a,", left=").concat(e))}())};return o.a.createElement("div",null,s?o.a.createElement("p",null,f.username):o.a.createElement("button",{onClick:function(e){return h(e)}},n))},W=["twitter","google","facebook","github"],z=function(e){var t=w(),n=t.auth,a=t.user,c=t.socket;return o.a.createElement("div",null,n?o.a.createElement("p",null,a.username):W.map((function(e){return o.a.createElement(P,{provider:e,key:e,socket:c})})))},B=function(e){return o.a.createElement("div",null,o.a.createElement("h1",null,"Profile"))},U=function(e){return o.a.createElement("div",null,o.a.createElement("h1",null,"Home"))},H=n(186),F=n(187),I=function(){var e=w(),t=e.auth,n=e.setAuth,c=e.user,r=e.setUser,l=e.socket;return Object(a.useEffect)((function(){l.on("logout",(function(e){console.log("logged out ".concat(e)),n(!1),r(null)}))}),[n,r,l]),o.a.createElement(H.a,{position:"static"},o.a.createElement(F.a,null,o.a.createElement(h.a,{variant:"h4"},o.a.createElement(i.a,{style:{color:"white"},to:"/"},"Tazkr")),o.a.createElement(h.a,{variant:"h4"},o.a.createElement(i.a,{style:{color:"white"},to:"/board"},"Board")),o.a.createElement(h.a,{variant:"h4"},o.a.createElement(i.a,{style:{color:"white"},to:"/profile"},"Profile"),t?o.a.createElement("button",{onClick:function(e){e.preventDefault(),l.emit("logout",c)}},"Logout"):o.a.createElement(i.a,{style:{color:"white"},to:"/login"},"Login"))))},J=n(91),K=n.n(J),L=(n(160),K()("http://localhost:8000")),M=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),u=Object(l.a)(r,2),m=u[0],s=u[1];return o.a.createElement("div",{className:"App"},o.a.createElement(y.Provider,{value:{auth:n,setAuth:c,user:m,setUser:s,socket:L}},o.a.createElement(I,null),o.a.createElement(i.b,null,o.a.createElement(U,{path:"/"}),o.a.createElement(z,{path:"/login"}),o.a.createElement(B,{path:"/profile/:id"}),o.a.createElement(D,{path:"/board/:id"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(161)}},[[99,1,2]]]);
//# sourceMappingURL=main.0a4581a1.chunk.js.map